<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An Eggcellent Timer for My Love</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* --- General Styling --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Comfortaa', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #fce4ec, #e1bee7);
            color: #333;
            padding: 20px;
        }

        /* --- Main Container --- */
        .container {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
            transition: all 0.3s ease;
        }

        /* --- Headings and Text --- */
        h1 {
            font-family: 'Dancing Script', cursive;
            color: #c2185b;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 30px;
        }

        /* --- Timer Display --- */
        .timer {
            font-size: 6rem;
            font-weight: 700;
            color: #ad1457;
            margin: 20px 0;
            line-height: 1;
        }

        /* --- Control Button --- */
        #controlButton {
            font-family: 'Comfortaa', sans-serif;
            background-color: #ff80ab;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 128, 171, 0.5);
            margin-bottom: 20px;
            width: 250px;
        }
        
        /* Style for the "Stop Alarm" button state */
        #controlButton.alarm-active {
            background-color: #c2185b; /* Deeper pink for alarm */
            box-shadow: 0 4px 15px rgba(194, 24, 91, 0.5);
        }

        #controlButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 128, 171, 0.7);
        }
        
        #controlButton.alarm-active:hover {
            box-shadow: 0 6px 20px rgba(194, 24, 91, 0.7);
        }

        #controlButton:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        #controlButton .fa-solid {
            margin-right: 10px;
        }

        /* --- Info and Done Messages --- */
        .info-text {
            color: #880e4f;
            font-size: 0.9rem;
            height: 20px;
            transition: opacity 0.5s ease;
        }

        .done-message {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #f8bbd0;
            border-radius: 15px;
            border: 2px dashed #c2185b;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .done-message h2 {
            font-family: 'Dancing Script', cursive;
            color: #c2185b;
            font-size: 2rem;
        }
    </style>
</head>
<body>

    <!-- Audio elements now point to your local files -->
    <!-- The `loop` attribute tells the browser these sounds should repeat -->
    <audio id="alarmSound" src="alarm.wav" preload="auto" loop></audio>
    <audio id="boilingSound" src="boiling.mp3" preload="auto" loop></audio>

    <div class="container">
        <h1>For My Dearest</h1>
        <p class="subtitle">A special timer for your perfect eggs <i class="fa-solid fa-heart" style="color:#ff80ab;"></i></p>

        <div id="timerDisplay" class="timer">12:00</div>

        <button id="controlButton">
            <i class="fa-solid fa-play"></i> Start Boiling
        </button>

        <p id="startTimeInfo" class="info-text"></p>

        <div id="doneMessage" class="done-message">
            <h2>Time's Up, Sweetheart! üç≥</h2>
            <p>Your perfect eggs are ready!</p>
        </div>
    </div>

    <script>
        // --- Get HTML Elements ---
        const timerDisplay = document.getElementById('timerDisplay');
        const controlButton = document.getElementById('controlButton');
        const startTimeInfo = document.getElementById('startTimeInfo');
        const doneMessage = document.getElementById('doneMessage');
        const alarmSound = document.getElementById('alarmSound');
        const boilingSound = document.getElementById('boilingSound');

        // --- Timer Configuration & State ---
        const DURATION_IN_SECONDS = 12 * 60; // 12 minutes
        let timerInterval;
        let timeLeft = DURATION_IN_SECONDS;
        let isAlarmRinging = false; // State to track if the alarm is ringing

        /**
         * Updates the timer display on the page.
         */
        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            timerDisplay.textContent = `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        /**
         * Starts the countdown timer.
         */
        function startTimer() {
            // Play boiling sound
            boilingSound.play();

            timeLeft = DURATION_IN_SECONDS;
            updateTimerDisplay(timeLeft);
            doneMessage.style.display = 'none';
            controlButton.disabled = true; // Disable while boiling
            controlButton.innerHTML = '<i class="fa-solid fa-hourglass-half"></i> Boiling...';

            const now = new Date();
            const startTimeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            startTimeInfo.textContent = `Boiling started at ${startTimeString}`;
            startTimeInfo.style.opacity = '1';

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(timeLeft);
                if (timeLeft <= 0) {
                    finishTimer();
                }
            }, 1000);
        }

        /**
         * Handles the completion of the timer.
         */
        function finishTimer() {
            clearInterval(timerInterval);
            
            // Stop boiling sound and reset it
            boilingSound.pause();
            boilingSound.currentTime = 0;

            // Start playing the alarm on loop
            alarmSound.play();
            isAlarmRinging = true;

            doneMessage.style.display = 'block';
            startTimeInfo.style.opacity = '0';
            
            // Enable and change the button to "Stop Alarm"
            controlButton.disabled = false;
            controlButton.innerHTML = '<i class="fa-solid fa-bell-slash"></i> Stop Alarm';
            controlButton.classList.add('alarm-active'); // Add special style for alarm
        }
        
        /**
         * Stops the alarm and resets the page to its initial state.
         */
        function stopAlarmAndReset() {
            // Stop the alarm sound and reset it
            alarmSound.pause();
            alarmSound.currentTime = 0;
            isAlarmRinging = false;

            doneMessage.style.display = 'none';
            
            // Reset the button to its "Start" state
            updateTimerDisplay(DURATION_IN_SECONDS);
            controlButton.innerHTML = '<i class="fa-solid fa-play"></i> Start Again';
            controlButton.classList.remove('alarm-active');
        }

        // --- Main Event Listener ---
        controlButton.addEventListener('click', () => {
            // The button has two functions depending on the state
            if (isAlarmRinging) {
                stopAlarmAndReset();
            } else {
                startTimer();
            }
        });

        // --- Initial State ---
        updateTimerDisplay(DURATION_IN_SECONDS);
    </script>
</body>
</html>
