<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An Eggcellent Timer </title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* --- General Styling --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Comfortaa', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #fce4ec, #e1bee7);
            color: #333;
            padding: 20px;
        }

        /* --- Main Container --- */
        .container {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
            transition: all 0.3s ease;
        }

        /* --- Headings and Text --- */
        h1 {
            font-family: 'Dancing Script', cursive;
            color: #c2185b;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 30px;
        }

        /* --- Timer Display --- */
        .timer {
            font-size: 6rem;
            font-weight: 700;
            color: #ad1457;
            margin: 20px 0;
            line-height: 1;
        }

        /* --- Start Button --- */
        #startButton {
            font-family: 'Comfortaa', sans-serif;
            background-color: #ff80ab;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 128, 171, 0.5);
            margin-bottom: 20px;
        }

        #startButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 128, 171, 0.7);
        }

        #startButton:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        #startButton .fa-solid {
            margin-right: 10px;
        }

        /* --- Info Text --- */
        .info-text {
            color: #880e4f;
            font-size: 0.9rem;
            height: 20px;
            transition: opacity 0.5s ease;
        }
        
        /* --- Dancing Egg Styling (Now always on) --- */
        .egg-wrapper {
            height: 100px;
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #egg {
            width: 60px;
            height: 80px;
            background-color: #fff9c4;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: block; /* <-- CHANGED from 'none' */
            animation: dance 1.5s infinite ease-in-out; /* <-- MOVED animation here */
        }
        
        @keyframes dance {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            25% { transform: rotate(-15deg) translateY(-10px); }
            75% { transform: rotate(15deg) translateY(-10px); }
        }

        /* --- Done Message Styling --- */
        .done-message {
            display: none; /* Hidden by default */
            margin-top: 10px;
            padding: 15px;
            background-color: #f8bbd0;
            border-radius: 15px;
            border: 2px dashed #c2185b;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .done-message h2 {
            font-family: 'Dancing Script', cursive;
            color: #c2185b;
            font-size: 2rem;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Egg timer</h1>
        <p class="subtitle">A special timer for your perfect eggs <i class="fa-solid fa-heart" style="color:#ff80ab;"></i></p>

        <div id="timerDisplay" class="timer">12:00</div>

        <button id="startButton">
            <i class="fa-solid fa-play"></i> Start Boiling
        </button>

        <p id="startTimeInfo" class="info-text"></p>

        <div class="egg-wrapper">
            <div id="egg"></div>
        </div>

        <div id="doneMessage" class="done-message">
            <h2>Time's Up, Sweetheart! üç≥</h2>
            <p>Your perfect eggs are ready!</p>
        </div>
    </div>
    
    <audio id="alarmSound" src="alarm.wav" preload="auto"></audio>

    <script>
        // --- Get HTML Elements ---
        const timerDisplay = document.getElementById('timerDisplay');
        const startButton = document.getElementById('startButton');
        const startTimeInfo = document.getElementById('startTimeInfo');
        const doneMessage = document.getElementById('doneMessage');
        const alarmSound = document.getElementById('alarmSound');
        // The egg element is no longer needed in the script

        // --- Timer Configuration ---
        const DURATION_IN_SECONDS = 0.5 * 60;
        let timerInterval;
        let timeLeft = DURATION_IN_SECONDS;
        
        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            timerDisplay.textContent = `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        function startTimer() {
            clearInterval(timerInterval);

            // Reset UI state
            timeLeft = DURATION_IN_SECONDS;
            updateTimerDisplay(timeLeft);
            doneMessage.style.display = 'none'; // Hide the 'done' message
            startButton.disabled = true;
            startButton.innerHTML = '<i class="fa-solid fa-hourglass-half"></i> Boiling...';

            const now = new Date();
            const startTimeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            startTimeInfo.textContent = `Boiling started at ${startTimeString}`;
            startTimeInfo.style.opacity = '1';

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(timeLeft);
                if (timeLeft <= 0) {
                    finishTimer();
                }
            }, 1000);
        }

        function finishTimer() {
            clearInterval(timerInterval);
            alarmSound.play();
            
            // Show celebration message
            doneMessage.style.display = 'block';
            
            startTimeInfo.style.opacity = '0';
            
            startButton.disabled = false;
            startButton.innerHTML = '<i class="fa-solid fa-play"></i> Start Again';
        }

        // --- Event Listener ---
        startButton.addEventListener('click', startTimer);

        // --- Initial State ---
        updateTimerDisplay(DURATION_IN_SECONDS);
    </script>
</body>
</html>
